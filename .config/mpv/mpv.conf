# Hardware decoding
hwdec=videotoolbox

# High-quality GPU rendering (Metal backend)
profile=gpu-hq
vo=gpu-next
video-sync=display-resample
interpolation
tscale=oversample

# Scaling - maximum fidelity for anime
scale=ewa_lanczossharp
cscale=ewa_lanczossharp
dscale=mitchell
correct-downscaling=yes
linear-downscaling=yes

# Chroma upsampling
sigmoid-upscaling=yes
sigmoid-slope=6

# Precision
fbo-format=rgba16f
target-prim=bt.709
target-trc=bt.1886
gamut-mapping-mode=warn  # warn if out-of-gamut

# Debanding
deband=yes
deband-iterations=4     # lowered slightly to avoid AV desync
deband-threshold=30
deband-range=16
deband-grain=16

# Frame timing & motion
video-sync-max-video-change=5
blend-subtitles=no

# UX
save-position-on-quit=yes
fullscreen=yes

# Dither
dither-depth = 8
